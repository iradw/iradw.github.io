(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{503:function(s,a,e){s.exports=e.p+"assets/img/verdaccio.b6489237.png"},504:function(s,a,e){s.exports=e.p+"assets/img/verdaccio2.f900d5d4.png"},505:function(s,a,e){s.exports=e.p+"assets/img/yrm.ebd22781.png"},535:function(s,a,e){"use strict";e.r(a);var n=e(4),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"环境搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[s._v("#")]),s._v(" 环境搭建")]),s._v(" "),n("ol",[n("li",[s._v("安装node")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nodejs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("apt源node版本为10.19.0，足够了。")]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[s._v("安装"),n("a",{attrs:{href:"https://verdaccio.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("verdaccio"),n("OutboundLink")],1),s._v("，pm2")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" verdaccio pm2 -g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("此时可以启动verdaccio，在终端执行verdaccio。\n"),n("img",{attrs:{src:e(503),alt:"verdaccio"}}),s._v("\n从输出可以看到配置文件的目录，编辑配置文件")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.config/verdaccio/config.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:e(504),alt:"verdaccio"}}),s._v("\nverdaccio的作用是存储依赖包，而不是每隔几分钟去和npm官方仓库同步，当我们连接自己的verdaccio下载依赖时，如果这个包存在直接返回，如果不存在就连接配置文件中的远程仓库下载、缓存再返回。如果将verdaccio搭建在内网，速度会非常快。因此为了提高下载速度，将地址改为淘宝镜像的地址，如图。verdaccio同样支持上传自己开发的包，将npm的镜像换成verdaccio即可。\n使用pm2启动verdaccio，即可使其在后台运行")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("pm2 start verdaccio\npm2 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("verdaccio在4873端口开放，防火墙开放4873端口，即可访问。\n可通过浏览器访问web页面，http://xx.xxx.xx.xx:4873")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",[s._v("官方提供docker镜像，也可以使用镜像直接运行。")])])]),s._v(" "),n("li",[n("p",[s._v("连接安装的verdaccio")]),s._v(" "),n("p",[s._v("回到自己的电脑，将npm仓库切换为http://xx.xxx.xx.xx:4873/,")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://xx.xxx.xx.xx:4873\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("有更好用的工具，可以帮助我们管理我们的仓库，yrm\nyrm比nrm好用在，可以同时切换yarn和npm的镜像")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" yrm\nyrm --help\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("yrm的使用很简单，看着帮助指令即可\n"),n("img",{attrs:{src:e(505),alt:"yrm"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" yrm add tencent http://xx.xxx.xx.xx:4873\n yrm ls\n yrm use tencent\n yrm ls\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("之后使用yarn或npm安装依赖时就会连接自己的服务器下载。")])]),s._v(" "),n("li",[n("p",[s._v("发布自己的包")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按提示输入用户名、密码、邮箱")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按提示输入")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("在需要发布的包的目录下执行")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("浏览器访问部署的verdaccio，可以看见自己发布的包。")])])])])}),[],!1,null,null,null);a.default=t.exports}}]);