(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{491:function(s,e,t){s.exports=t.p+"assets/img/docker-test.22fcf7df.png"},492:function(s,e,t){s.exports=t.p+"assets/img/docker-images.cb28ab25.png"},525:function(s,e,t){"use strict";t.r(e);var a=t(4),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),a("h3",{attrs:{id:"_1-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装docker"}},[s._v("#")]),s._v(" 1. 安装Docker")]),s._v(" "),a("p",[s._v("本人环境为"),a("code",[s._v("ArchLinux")]),s._v("，因此安装非常简单，"),a("code",[s._v("sudo pacman -Sy docker")]),s._v("即可，其他环境可查询其他文档，也比较简单，只不过需要重新设置镜像源。")]),s._v(" "),a("h3",{attrs:{id:"_2-启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动docker"}},[s._v("#")]),s._v(" 2. 启动Docker")]),s._v(" "),a("p",[a("code",[s._v("systemctl start docker")]),s._v("启动，"),a("code",[s._v("systemctl enable docker")]),s._v("设置开机自启动。")]),s._v(" "),a("h3",{attrs:{id:"_3-更换镜像源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-更换镜像源"}},[s._v("#")]),s._v(" 3. 更换镜像源")]),s._v(" "),a("p",[s._v("docker默认使用官方镜像源，速度慢，需要更换源")]),s._v(" "),a("ol",[a("li",[s._v("在"),a("code",[s._v("/etc/docker")]),s._v("下，创建"),a("code",[s._v("daemon.json")]),s._v("文件，写入下面的代码，更换为中科大的镜像源。")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.ustc.edu.cn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("重启docker服务，"),a("code",[s._v("systemctl restart docker")])]),s._v(" "),a("li",[s._v("检测是否成功，执行"),a("code",[s._v("docker run hello-world")]),s._v("，如果出现"),a("img",{attrs:{src:t(491),alt:""}}),s._v("证明docker安装和配置成功。")])]),s._v(" "),a("h2",{attrs:{id:"docker中央仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker中央仓库"}},[s._v("#")]),s._v(" Docker中央仓库")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("官方仓库，"),a("a",{attrs:{href:"https://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com"),a("OutboundLink")],1),s._v("，下载速度非常慢.")])]),s._v(" "),a("li",[a("p",[s._v("推荐，"),a("a",{attrs:{href:"https://hub.daocloud.io",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.daocloud.io"),a("OutboundLink")],1),s._v("。")])])]),s._v(" "),a("h2",{attrs:{id:"docker镜像操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像操作"}},[s._v("#")]),s._v(" Docker镜像操作")]),s._v(" "),a("ol",[a("li",[s._v("拉取镜像\n在daocloud网站上搜索需要的镜像，比如nginx，在"),a("code",[s._v("版本")]),s._v("一栏，点击拉取可以得到镜像名，即"),a("code",[s._v("daocloud.io/library/nginx:latest")]),s._v("，执行"),a("code",[s._v("docker pull daocloud.io/library/nginx:latest")]),s._v("即可拉取nginx镜像。")]),s._v(" "),a("li",[s._v("查看本地镜像\n"),a("code",[s._v("docker images")]),s._v("，"),a("code",[s._v("IMAGE_ID")]),s._v("就是镜像的唯一标识\n"),a("img",{attrs:{src:t(492),alt:""}})]),s._v(" "),a("li",[s._v("删除本地镜像\n"),a("code",[s._v("docker rmi 08393e824c32")]),s._v("，"),a("code",[s._v("08393e824c32")]),s._v("是刚刚下载的NGINX镜像的"),a("code",[s._v("IMAGE_ID")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"docker容器操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker容器操作"}},[s._v("#")]),s._v(" Docker容器操作")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("运行容器\n"),a("code",[s._v("docker run 镜像的标识|镜像的名称[:镜像的TAG]")]),s._v("，这种方法比较简单，但是不能指定端口，需要用到下面的方式启动。")])]),s._v(" "),a("li",[a("p",[s._v("常用参数\n"),a("code",[s._v("docker run -d -p 宿主机端口:容器端口 --name 容器名称 镜像的标识|镜像的名称[:镜像的TAG]")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[s._v("-d代表后台运行，-p宿主机端口为我们需要在浏览器访问的端口，容器端口就是镜像在虚拟环境中运行的端口,")])]),s._v(" "),a("p",[s._v("如"),a("code",[s._v("docker run -d -p 8083:80 --name nginxContainer 083")]),s._v("，执行后在本地浏览器访问"),a("code",[s._v("localhost:8083")]),s._v("就可以看到NGINX的界面。填写镜像标识时不需要完整填写，只需填写前几个字符，并保证唯一即可。")])]),s._v(" "),a("li",[a("p",[s._v("查看容器\n"),a("code",[s._v("docker ps -qa")]),s._v("\n-q查看容器id，-a查看全部容器，-qa查看全部容器id")])]),s._v(" "),a("li",[a("p",[s._v("查看容器日志\n"),a("code",[s._v("docker logs -f 容器id|容器名")])])]),s._v(" "),a("li",[a("p",[s._v("进入容器内部\n"),a("code",[s._v("docker exec -it 容器id|容器名 bash")]),s._v(", 容器内部就是一个小的linux系统\n输入"),a("code",[s._v("exit")]),s._v("退出容器")])]),s._v(" "),a("li",[a("p",[s._v("停止容器\n"),a("code",[s._v("docker stop 容器id|容器名")]),s._v(" "),a("code",[s._v("docker stop $(docker ps -qa)")]),s._v("停止全部容器")])]),s._v(" "),a("li",[a("p",[s._v("启动容器\n"),a("code",[s._v("docker start 容器id|容器名")])])]),s._v(" "),a("li",[a("p",[s._v("删除容器\n"),a("code",[s._v("docker rm 容器id|容器名")]),s._v(" "),a("code",[s._v("docker rm $(docker ps -qa)")]),s._v("删除全部容器")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[s._v("删除容器前需要停止容器。")])])]),s._v(" "),a("li",[a("p",[s._v("把宿主机的文件复制到docker容器内部\n"),a("code",[s._v("docker cp 文件名 容器id 容器内部路径")])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[s._v("我们把别人的镜像一层一层的放在自己的容器中，然后再把自己的容器变成镜像。")])]),s._v(" "),a("ol",{attrs:{start:"10"}},[a("li",[s._v("发布自己的镜像"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取nginx镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("docker commit -m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"镜像的描述信息"')]),s._v(" -a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"镜像的作者"')]),s._v(" 容器id 镜像tag"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\ndocker pull daocloud.io/library/nginx:1.13.2\ndocker images\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建nginx容器")]),s._v("\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 2f2f\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布自己的容器")]),s._v("\ndocker commit -m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_nginx"')]),s._v(" -a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DivYang"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("993")]),s._v(" mynginx:1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[s._v("#")]),s._v(" 数据卷")]),s._v(" "),a("p",[a("code",[s._v("docker run -v 宿主机目录:容器内目录 镜像id /bin/bash")]),s._v("，映射宿主机内的目录和docker容器内的目录，以实现文件的同步,添加"),a("code",[s._v(":ro")]),s._v("可以使容器内的目录只读，保证文件安全。\n例如映射出nginx的配置文件"),a("code",[s._v("docker run -d -it -p 8800:80 -v ~/Code/nginxConf.d:/etc/nginx/conf.d 2f /bin/bash")]),s._v(",2f为nginx的镜像id。在本地的"),a("code",[s._v("nginxConf.d目录")]),s._v("添加aaa.txt, 容器中的"),a("code",[s._v("conf.d目录")]),s._v("也会同步添加aaa.txt。")])])}),[],!1,null,null,null);e.default=r.exports}}]);