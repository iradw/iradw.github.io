(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{489:function(s,e,t){s.exports=t.p+"assets/img/docker-test.22fcf7df.png"},490:function(s,e,t){s.exports=t.p+"assets/img/docker-images.cb28ab25.png"},520:function(s,e,t){"use strict";t.r(e);var r=t(4),a=Object(r.a)({},(function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h2",{attrs:{id:"docker安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),r("h3",{attrs:{id:"_1-安装docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装docker"}},[s._v("#")]),s._v(" 1. 安装Docker")]),s._v(" "),r("p",[s._v("本人环境为"),r("code",[s._v("ArchLinux")]),s._v("，因此安装非常简单，"),r("code",[s._v("sudo pacman -Sy docker")]),s._v("即可，其他环境可查询其他文档，也比较简单，只不过需要重新设置镜像源。")]),s._v(" "),r("h3",{attrs:{id:"_2-启动docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动docker"}},[s._v("#")]),s._v(" 2. 启动Docker")]),s._v(" "),r("p",[r("code",[s._v("systemctl start docker")]),s._v("启动，"),r("code",[s._v("systemctl enable docker")]),s._v("设置开机自启动。")]),s._v(" "),r("h3",{attrs:{id:"_3-更换镜像源"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-更换镜像源"}},[s._v("#")]),s._v(" 3. 更换镜像源")]),s._v(" "),r("p",[s._v("docker默认使用官方镜像源，速度慢，需要更换源")]),s._v(" "),r("ol",[r("li",[s._v("在"),r("code",[s._v("/etc/docker")]),s._v("下，创建"),r("code",[s._v("daemon.json")]),s._v("文件，写入下面的代码，更换为中科大的镜像源。")])]),s._v(" "),r("div",{staticClass:"language-json line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.ustc.edu.cn"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ol",{attrs:{start:"2"}},[r("li",[s._v("重启docker服务，"),r("code",[s._v("systemctl restart docker")])]),s._v(" "),r("li",[s._v("检测是否成功，执行"),r("code",[s._v("docker run hello-world")]),s._v("，如果出现"),r("img",{attrs:{src:t(489),alt:""}}),s._v("证明docker安装和配置成功。")])]),s._v(" "),r("h2",{attrs:{id:"docker中央仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker中央仓库"}},[s._v("#")]),s._v(" Docker中央仓库")]),s._v(" "),r("ol",[r("li",[r("p",[s._v("官方仓库，"),r("a",{attrs:{href:"https://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com"),r("OutboundLink")],1),s._v("，下载速度非常慢.")])]),s._v(" "),r("li",[r("p",[s._v("推荐，"),r("a",{attrs:{href:"https://hub.daocloud.io",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.daocloud.io"),r("OutboundLink")],1),s._v("。")])])]),s._v(" "),r("h2",{attrs:{id:"docker镜像操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像操作"}},[s._v("#")]),s._v(" Docker镜像操作")]),s._v(" "),r("ol",[r("li",[s._v("拉取镜像\n在daocloud网站上搜索需要的镜像，比如nginx，在"),r("code",[s._v("版本")]),s._v("一栏，点击拉取可以得到镜像名，即"),r("code",[s._v("daocloud.io/library/nginx:latest")]),s._v("，执行"),r("code",[s._v("docker pull daocloud.io/library/nginx:latest")]),s._v("即可拉取nginx镜像。")]),s._v(" "),r("li",[s._v("查看本地镜像\n"),r("code",[s._v("docker images")]),s._v("，"),r("code",[s._v("IMAGE_ID")]),s._v("就是镜像的唯一标识\n"),r("img",{attrs:{src:t(490),alt:""}})]),s._v(" "),r("li",[s._v("删除本地镜像\n"),r("code",[s._v("docker rmi 08393e824c32")]),s._v("，"),r("code",[s._v("08393e824c32")]),s._v("是刚刚下载的NGINX镜像的"),r("code",[s._v("IMAGE_ID")]),s._v("。")])]),s._v(" "),r("h2",{attrs:{id:"docker容器操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker容器操作"}},[s._v("#")]),s._v(" Docker容器操作")]),s._v(" "),r("ol",[r("li",[r("p",[s._v("运行容器\n"),r("code",[s._v("docker run 镜像的标识|镜像的名称[:镜像的TAG]")]),s._v("，这种方法比较简单，但是不能指定端口，需要用到下面的方式启动。")])]),s._v(" "),r("li",[r("p",[s._v("常用参数\n"),r("code",[s._v("docker run -d -p 宿主机端口:容器端口 --name 容器名称 镜像的标识|镜像的名称[:镜像的TAG]")])]),s._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",[s._v("-d代表后台运行，-p宿主机端口为我们需要在浏览器访问的端口，容器端口就是镜像在虚拟环境中运行的端口,")])]),s._v(" "),r("p",[s._v("如"),r("code",[s._v("docker run -d -p 8083:80 --name nginxContainer 083")]),s._v("，执行后在本地浏览器访问"),r("code",[s._v("localhost:8083")]),s._v("就可以看到NGINX的界面。填写镜像标识时不需要完整填写，只需填写前几个字符，并保证唯一即可。")])]),s._v(" "),r("li",[r("p",[s._v("查看容器\n"),r("code",[s._v("docker ps -qa")]),s._v("\n-q查看容器id，-a查看全部容器，-qa查看全部容器id")])]),s._v(" "),r("li",[r("p",[s._v("查看容器日志\n"),r("code",[s._v("docker logs -f 容器id|容器名")])])]),s._v(" "),r("li",[r("p",[s._v("进入容器内部\n"),r("code",[s._v("docker exec -it 容器id|容器名 bash")]),s._v(", 容器内部就是一个小的linux系统\n输入"),r("code",[s._v("exit")]),s._v("退出容器")])]),s._v(" "),r("li",[r("p",[s._v("停止容器\n"),r("code",[s._v("docker stop 容器id|容器名")]),s._v(" "),r("code",[s._v("docker stop $(docker ps -qa)")]),s._v("停止全部容器")])]),s._v(" "),r("li",[r("p",[s._v("启动容器\n"),r("code",[s._v("docker start 容器id|容器名")])])]),s._v(" "),r("li",[r("p",[s._v("删除容器\n"),r("code",[s._v("docker rm 容器id|容器名")]),s._v(" "),r("code",[s._v("docker rm $(docker ps -qa)")]),s._v("删除全部容器")]),s._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",[s._v("删除容器前需要停止容器。")])])]),s._v(" "),r("li",[r("p",[s._v("把宿主机的文件复制到docker容器内部\n"),r("code",[s._v("docker cp 文件名 容器id 容器内部路径")])])])]),s._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",[s._v("我们把别人的镜像一层一层的放在自己的容器中，然后再把自己的容器变成镜像。")])]),s._v(" "),r("ol",{attrs:{start:"10"}},[r("li",[s._v("发布自己的镜像"),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取nginx镜像")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("docker commit -m"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"镜像的描述信息"')]),s._v(" -a"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"镜像的作者"')]),s._v(" 容器id 镜像tag"),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\ndocker pull daocloud.io/library/nginx:1.13.2\ndocker images\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建nginx容器")]),s._v("\ndocker run -d -p "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 2f2f\ndocker "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布自己的容器")]),s._v("\ndocker commit -m"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_nginx"')]),s._v(" -a"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DivYang"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("993")]),s._v(" mynginx:1.0\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])])])]),s._v(" "),r("h2",{attrs:{id:"数据卷"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[s._v("#")]),s._v(" 数据卷")])])}),[],!1,null,null,null);e.default=a.exports}}]);